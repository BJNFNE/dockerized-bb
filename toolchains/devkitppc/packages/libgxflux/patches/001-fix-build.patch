From bed224a399cd4179e09d5e7bda3b2a2977dd9886 Mon Sep 17 00:00:00 2001
From: Carsten Teibes <c.teibes+github@gmail.com>
Date: Thu, 12 Dec 2013 02:45:12 +0100
Subject: [PATCH] build fixes

---
 common.mk     | 7 +++----
 src/gfx.c     | 2 +-
 src/gfx_con.c | 5 ++---
 3 files changed, 6 insertions(+), 8 deletions(-)

diff --git a/common.mk b/common.mk
index 7aadffc..4c04dde 100644
--- a/common.mk
+++ b/common.mk
@@ -9,9 +9,9 @@ RANLIB = $(PREFIX)ranlib
 STRIP = $(PREFIX)strip
 
 MACHDEP += -g -DGEKKO -mcpu=750 -meabi -mhard-float
-CFLAGS += $(MACHDEP) -Os -Wall -Wextra -pipe -I$(DEVKITPRO)/libogc/include
+CFLAGS += $(MACHDEP) -O2 -Wall -Wextra -pipe -I$(DEVKITPRO)/libogc/include
 LDFLAGS += $(MACHDEP)
-ASFLAGS += -D_LANGUAGE_ASSEMBLY -DHW_RVL -I$(DEVKITPRO)/libogc/include
+ASFLAGS += -D_LANGUAGE_ASSEMBLY -I$(DEVKITPRO)/libogc/include
 
 ifeq ($(GAMECUBE),1)
 MACHDEP += -mogc
@@ -19,7 +19,7 @@ CFLAGS += -DHW_DOL
 LDFLAGS += -L$(DEVKITPRO)/libogc/lib/cube
 ASFLAGS += -DHW_DOL
 else
-MACHDEP += -mrvl 
+MACHDEP += -mrvl
 CFLAGS += -DHW_RVL
 LDFLAGS += -L$(DEVKITPRO)/libogc/lib/wii
 ASFLAGS += -DHW_RVL
@@ -91,4 +91,3 @@ clean:
 -include $(DEPDIR)/*
 
 .PHONY: clean
-
diff --git a/src/gfx.c b/src/gfx.c
index 5bfa1ee..a83a94b 100644
--- a/src/gfx.c
+++ b/src/gfx.c
@@ -60,7 +60,7 @@ static struct {
 static GXRModeObj *mode_table[5][2] = {
 	{ &TVNtsc480Prog, &TVNtsc240Ds },
 	{ &TVNtsc480IntDf, &TVNtsc240Ds },
-	{ &TVPal574IntDfScale, &TVPal264Ds },
+	{ &TVPal576IntDfScale, &TVPal264Ds },
 	{ &TVEurgb60Hz480IntDf, &TVEurgb60Hz240Ds },
 	{ &TVMpal480IntDf, &TVMpal240Ds }
 };
diff --git a/src/gfx_con.c b/src/gfx_con.c
index 0b4c113..14efe3f 100644
--- a/src/gfx_con.c
+++ b/src/gfx_con.c
@@ -8,9 +8,6 @@
  *
  */
 
-#include <ogc/machine/processor.h>
-#include <ogc/usbgecko.h>
-
 #include "gfx.h"
 #include "gfx_con.h"
 
@@ -20,6 +17,8 @@
 #include <stdarg.h>
 #include <string.h>
 
+#include <ogc/machine/processor.h>
+#include <ogc/usbgecko.h>
 #include <sys/iosupport.h>
 
 #define USBGECKO_CHANNEL 1
